{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import axios from 'axios';\n\n// const instance = axios.create({\n//   baseURL: 'http://api.weatherapi.com/v1',\n// });\n// const langCode = navigator.language.split(\"-\")[0];\n\nexport const fetchForecastWeather = async (q = '', days = 7) => {\n  const { data } = await axios.get(\n    'https://api.weatherapi.com/v1/forecast.json',\n    {\n      params: {\n        // lang: langCode,\n        days: days,\n        q: q,\n        key: '25f15b55d263487589983533240905',\n      },\n    }\n  );\n  return data;\n};\n\nconst input = document.querySelector('.search__input');\nconst btn = document.querySelector('.search__button');\nconst temp = document.querySelector('.weather__temp');\nconst city = document.querySelector('.weather__city');\nconst imgMain = document.querySelector('.condition-img');\nconst textCurrently = document.querySelector('.condition-text');\nconst date = document.querySelector('.condition-date');\nconst feelsLike = document.querySelector('p[data-textCondition=\"feelslike\"]');\nconst wind = document.querySelector('p[data-textCondition=\"wind_mph\"]');\nconst humidity = document.querySelector('p[data-textCondition=\"humidity\"]');\nconst uv = document.querySelector('p[data-textCondition=\"uv\"]');\nconst tempRange = document.querySelector('.weather__text-range');\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  // const userResponse = confirm(\"Дозволити доступ до місцезнаходження?\");\n\n  try {\n    navigator.geolocation.getCurrentPosition(\n      async position => {\n        const { latitude, longitude } = position.coords;\n        const currentLocation = `${latitude}, ${longitude}`;\n        const dataAutocomplete = await fetchForecastWeather(currentLocation);\n        updateWeatherInfo(dataAutocomplete);\n        updateWeatherInfoDetails(dataAutocomplete);\n        updateWeatherInfoFuture(dataAutocomplete);\n      },\n      error => {\n        console.error('Помилка отримання геолокації:', error);\n      }\n    );\n  } catch (error) {\n    console.error('Помилка при спробі отримати геолокацію:', error);\n  }\n});\nbtn.addEventListener('click', async () => {\n  const cityName = input.value;\n\n  try {\n    const dataForecast = await fetchForecastWeather(cityName);\n    updateWeatherInfo(dataForecast);\n    updateWeatherInfoDetails(dataForecast);\n    updateWeatherInfoFuture(dataForecast);\n  } catch (error) {\n    console.error('Error fetching weather data:', error);\n  }\n});\n\ninput.addEventListener('keydown', async e => {\n  if (e.key === 'Enter') {\n    const cityName = input.value;\n\n    try {\n      const dataForecast = await fetchForecastWeather(cityName);\n      updateWeatherInfo(dataForecast);\n      updateWeatherInfoDetails(dataForecast);\n      updateWeatherInfoFuture(dataForecast);\n    } catch (error) {\n      console.error('Error fetching weather data:', error);\n    }\n  }\n});\nfunction updateWeatherInfo(data) {\n  city.textContent = `${data.location.name}, ${data.location.country}`;\n  imgMain.src = `${data.current.condition.icon}`;\n  temp.textContent = `${data.current.temp_c}ºC`;\n  textCurrently.textContent = data.current.condition.text;\n  date.textContent = data.location.localtime;\n  feelsLike.textContent = `${data.current.feelslike_c}º`;\n  wind.textContent = `${data.current.wind_dir} ${data.current.wind_kph}kph`;\n  humidity.textContent = `${data.current.humidity} %`;\n  uv.textContent = `${data.current.uv}`;\n  tempRange.textContent = `Min 🌡: ${data.forecast.forecastday[0].day.mintemp_c} | Max 🌡: ${data.forecast.forecastday[0].day.maxtemp_c}`;\n}\n\nfunction updateWeatherInfoDetails(data) {\n  const arr = data.forecast.forecastday.flatMap(el => {\n    return el.hour;\n  });\n\n  const detailsContainer = document.querySelector('.details');\n  const futureContainer = document.querySelector('.future');\n  const markup = `    \n    <img class=\"details__img\" src=\"\" alt=\"\">\n      <p class=\"details__hour\"></p>\n      <p class=\"details__temp\"></p>\n      \n      <p class=\"details__text\"></p>\n  \n  `;\n  const markupFuture = `    \n    <img class=\"details__img\" src=\"\" alt=\"\">\n      <p class=\"details__hour\"></p>\n      <p class=\"details__temp\"></p>\n      \n      <p class=\"details__text\"></p>\n  \n  `;\n\n  detailsContainer.innerHTML = '';\n  futureContainer.innerHTML = '';\n\n  let detailsCols = [];\n\n  arr.forEach(hourData => {\n    if (hourData.time > date.textContent) {\n      const detailsCol = document.createElement('div');\n      detailsCol.classList.add('details__col');\n      detailsCol.innerHTML = markup;\n\n      const hourElement = detailsCol.querySelector('.details__hour');\n      const imgElement = detailsCol.querySelector('.details__img');\n      const textElement = detailsCol.querySelector('.details__text');\n      const tempElement = detailsCol.querySelector('.details__temp');\n\n      hourElement.textContent = hourData.time.slice(11);\n      tempElement.textContent = `🌡${hourData.temp_c}`;\n      imgElement.src = hourData.condition.icon;\n      textElement.textContent = `☔ ${hourData.chance_of_rain}%`;\n\n      detailsCols.push(detailsCol);\n    }\n  });\n\n  detailsCols = detailsCols.slice(0, 7);\n\n  detailsCols.forEach(detailsCol => {\n    detailsContainer.appendChild(detailsCol);\n  });\n}\n\nfunction updateWeatherInfoFuture(data) {\n  const futureContainer = document.querySelector('.future');\n  const markupFuture = `    \n    <img class=\"future__img\" src=\"\" alt=\"\">\n      <p class=\"future__day\"></p>\n      <p class=\"future__temp\"></p>\n      \n      <p class=\"future__text\"></p>\n  \n  `;\n\n  futureContainer.innerHTML = '';\n  let futureCols = [];\n\n  data.forecast.forecastday.forEach(day => {\n    const futureCol = document.createElement('div');\n    futureCol.classList.add('future__col');\n    futureCol.innerHTML = markupFuture;\n\n    const dayElement = futureCol.querySelector('.future__day');\n    const imgElement = futureCol.querySelector('.future__img');\n    const textElement = futureCol.querySelector('.future__text');\n    const tempElement = futureCol.querySelector('.future__temp');\n\n    dayElement.textContent = new Date(day.date).toLocaleDateString('en-US', {\n      weekday: 'short',\n    });\n    tempElement.textContent = `${day.day.maxtemp_c}º | ${day.day.mintemp_c}º`;\n    imgElement.src = day.day.condition.icon;\n    textElement.textContent = `☔ ${day.day.daily_chance_of_rain}%`;\n\n    futureCols.push(futureCol);\n  });\n\n  futureCols.forEach(futureCol => {\n    futureContainer.appendChild(futureCol);\n  });\n}\n"],"names":["fetchForecastWeather","q","days","data","axios","input","btn","temp","city","imgMain","textCurrently","date","feelsLike","wind","humidity","uv","tempRange","position","latitude","longitude","currentLocation","dataAutocomplete","updateWeatherInfo","updateWeatherInfoDetails","updateWeatherInfoFuture","error","cityName","dataForecast","arr","el","detailsContainer","futureContainer","markup","detailsCols","hourData","detailsCol","hourElement","imgElement","textElement","tempElement","markupFuture","futureCols","day","futureCol","dayElement"],"mappings":"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"}