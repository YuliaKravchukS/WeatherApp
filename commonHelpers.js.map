{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport const fetchForecastWeather = async (q = '', days = 5) => {\n  const { data } = await axios.get(\n    'https://api.weatherapi.com/v1/forecast.json',\n    {\n      params: {\n        days: days,\n        q: q,\n        key: '25f15b55d263487589983533240905',\n      },\n    }\n  );\n  return data;\n};\nexport const fetchCurrentPosition = async (latitude, longitude) => {\n  const { data } = await axios.get('https://geocode.maps.co/reverse', {\n    params: {\n      lat: latitude,\n      lon: longitude,\n      api_key: '663cc74cce557992281678asg62c6c6',\n    },\n  });\n  return data;\n};\n\nconst input = document.querySelector('.search__input');\nconst btn = document.querySelector('.search__button');\nconst temp = document.querySelector('.weather__temp');\nconst city = document.querySelector('.weather__city');\nconst imgMain = document.querySelector('.condition-img');\nconst textCurrently = document.querySelector('.condition-text');\nconst date = document.querySelector('.condition-date');\nconst feelsLike = document.querySelector('p[data-textCondition=\"feelslike\"]');\nconst wind = document.querySelector('p[data-textCondition=\"wind_mph\"]');\nconst humidity = document.querySelector('p[data-textCondition=\"humidity\"]');\nconst uv = document.querySelector('p[data-textCondition=\"uv\"]');\nconst tempRange = document.querySelector('.weather__text-range');\nconst loader = document.querySelector('.loader');\n\nhideElements('.card__container');\ndocument.addEventListener('DOMContentLoaded', () => {\n  hideElements('.card__container');\n  const userResponse = confirm('Allow location access?');\n\n  if (userResponse) {\n    try {\n      navigator.geolocation.getCurrentPosition(\n        async position => {\n          const { latitude, longitude } = position.coords;\n          const dataCurrentTown = await fetchCurrentPosition(\n            latitude,\n            longitude\n          );\n          const dataAutocomplete = await fetchForecastWeather(\n            `${dataCurrentTown.address.town}, ${dataCurrentTown.address.country}`\n          );\n\n          updateWeatherInfo(dataAutocomplete);\n          updateWeatherInfoDetails(dataAutocomplete);\n          updateWeatherInfoFuture(dataAutocomplete);\n          loader.style.visibility = 'hidden';\n          visibleElements('.card__container');\n        },\n        async error => {\n          alert(\n            'Error getting geolocation. Please enter the name of the city',\n            error\n          );\n          const dataAutocomplete = await fetchForecastWeather('Kyiv');\n          updateWeatherInfo(dataAutocomplete);\n          updateWeatherInfoDetails(dataAutocomplete);\n          updateWeatherInfoFuture(dataAutocomplete);\n          loader.style.visibility = 'hidden';\n          visibleElements('.card__container');\n        }\n      );\n    } catch (error) {\n      console.error('Error getting geolocation', error);\n    }\n  } else {\n    alert('Error getting geolocation. Please enter the name of the city');\n    loader.style.visibility = 'hidden';\n    hideElements('.card__container');\n  }\n});\nbtn.addEventListener('click', async () => {\n  const cityName = input.value;\n\n  try {\n    loader.style.visibility = 'visible';\n    hideElements('.card__container');\n    const dataForecast = await fetchForecastWeather(cityName);\n    updateWeatherInfo(dataForecast);\n    updateWeatherInfoDetails(dataForecast);\n    updateWeatherInfoFuture(dataForecast);\n    loader.style.visibility = 'hidden';\n    visibleElements('.card__container');\n  } catch (error) {\n    console.error('Error fetching weather data:', error);\n  }\n});\n\ninput.addEventListener('keydown', async e => {\n  if (e.key === 'Enter') {\n    const cityName = input.value;\n\n    try {\n      loader.style.visibility = 'visible';\n      hideElements('.card__container');\n      const dataForecast = await fetchForecastWeather(cityName);\n      updateWeatherInfo(dataForecast);\n      updateWeatherInfoDetails(dataForecast);\n      updateWeatherInfoFuture(dataForecast);\n      loader.style.visibility = 'hidden';\n      visibleElements('.card__container');\n    } catch (error) {\n      console.error('Error fetching weather data:', error);\n    }\n  }\n});\nfunction updateWeatherInfo(data) {\n  city.textContent = `${data.location.name}, ${data.location.country}`;\n  imgMain.src = `${data.current.condition.icon}`;\n  temp.textContent = `${data.current.temp_c}ÂºC`;\n  textCurrently.textContent = data.current.condition.text;\n  date.textContent = data.location.localtime;\n  feelsLike.textContent = `${data.current.feelslike_c}Âº`;\n  wind.textContent = `${data.current.wind_dir} ${data.current.wind_kph}kph`;\n  humidity.textContent = `${data.current.humidity} %`;\n  uv.textContent = `${data.current.uv}`;\n  tempRange.textContent = `Min ðŸŒ¡: ${data.forecast.forecastday[0].day.mintemp_c} | Max ðŸŒ¡: ${data.forecast.forecastday[0].day.maxtemp_c}`;\n}\n\nfunction updateWeatherInfoDetails(data) {\n  const arr = data.forecast.forecastday.flatMap(el => {\n    return el.hour;\n  });\n\n  const detailsContainer = document.querySelector('.details');\n  const markup = `    \n    <img class=\"details__img\" src=\"\" alt=\"\">\n      <p class=\"details__hour\"></p>\n      <p class=\"details__temp\"></p>\n      \n      <p class=\"details__text\"></p>\n  \n  `;\n\n  detailsContainer.innerHTML = '';\n\n  let detailsCols = [];\n\n  arr.forEach(hourData => {\n    if (hourData.time > date.textContent) {\n      const detailsCol = document.createElement('div');\n      detailsCol.classList.add('details__col');\n      detailsCol.innerHTML = markup;\n\n      const hourElement = detailsCol.querySelector('.details__hour');\n      const imgElement = detailsCol.querySelector('.details__img');\n      const textElement = detailsCol.querySelector('.details__text');\n      const tempElement = detailsCol.querySelector('.details__temp');\n\n      hourElement.textContent = hourData.time.slice(11);\n      tempElement.textContent = `ðŸŒ¡${hourData.temp_c}`;\n      imgElement.src = hourData.condition.icon;\n      textElement.textContent = `â˜” ${hourData.chance_of_rain}%`;\n\n      detailsCols.push(detailsCol);\n    }\n  });\n\n  detailsCols = detailsCols.slice(0, 5);\n\n  detailsCols.forEach(detailsCol => {\n    detailsContainer.appendChild(detailsCol);\n  });\n}\n\nfunction updateWeatherInfoFuture(data) {\n  const futureContainer = document.querySelector('.future');\n  const markupFuture = `    \n    <img class=\"future__img\" src=\"\" alt=\"\">\n      <p class=\"future__day\"></p>\n      <p class=\"future__temp\"></p>\n      \n      <p class=\"future__text\"></p>\n  \n  `;\n\n  futureContainer.innerHTML = '';\n  let futureCols = [];\n\n  data.forecast.forecastday.forEach(day => {\n    const futureCol = document.createElement('div');\n    futureCol.classList.add('future__col');\n    futureCol.innerHTML = markupFuture;\n\n    const dayElement = futureCol.querySelector('.future__day');\n    const imgElement = futureCol.querySelector('.future__img');\n    const textElement = futureCol.querySelector('.future__text');\n    const tempElement = futureCol.querySelector('.future__temp');\n\n    dayElement.textContent = new Date(day.date).toLocaleDateString('en-US', {\n      weekday: 'short',\n    });\n    tempElement.textContent = `${day.day.maxtemp_c}Âº | ${day.day.mintemp_c}Âº`;\n    imgElement.src = day.day.condition.icon;\n    textElement.textContent = `â˜” ${day.day.daily_chance_of_rain}%`;\n\n    futureCols.push(futureCol);\n  });\n\n  futureCols.forEach(futureCol => {\n    futureContainer.appendChild(futureCol);\n  });\n}\n\nfunction hideElements(selector) {\n  const elements = document.querySelectorAll(selector);\n  elements.forEach(element => {\n    element.style.visibility = 'hidden';\n  });\n}\nfunction visibleElements(selector) {\n  const elements = document.querySelectorAll(selector);\n  elements.forEach(element => {\n    element.style.visibility = 'visible';\n  });\n}\n"],"names":["fetchForecastWeather","q","days","data","axios","fetchCurrentPosition","latitude","longitude","input","btn","temp","city","imgMain","textCurrently","date","feelsLike","wind","humidity","uv","tempRange","loader","hideElements","position","dataCurrentTown","dataAutocomplete","updateWeatherInfo","updateWeatherInfoDetails","updateWeatherInfoFuture","visibleElements","error","cityName","dataForecast","e","arr","el","detailsContainer","markup","detailsCols","hourData","detailsCol","hourElement","imgElement","textElement","tempElement","futureContainer","markupFuture","futureCols","day","futureCol","dayElement","selector","element"],"mappings":"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"}